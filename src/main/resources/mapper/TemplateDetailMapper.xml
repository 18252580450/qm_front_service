<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.asiainfo.qm.manage.dao.TemplateDetailMapper" >
  <resultMap id="BaseResultMap" type="com.asiainfo.qm.manage.domain.TemplateDetail" >
    <id column="NODE_ID" property="nodeId" jdbcType="VARCHAR" />
    <id column="NODE_TYPE" property="nodeType" jdbcType="VARCHAR" />
    <id column="TEMPLATE_ID" property="templateId" jdbcType="VARCHAR" />
    <result column="TENANT_ID" property="tenantId" jdbcType="VARCHAR" />
    <result column="PROVINCE_ID" property="provinceId" jdbcType="VARCHAR" />
    <result column="CITY_ID" property="cityId" jdbcType="VARCHAR" />
    <result column="NODE_NAME" property="nodeName" jdbcType="VARCHAR" />
    <result column="P_NODE_ID" property="pNodeId" jdbcType="VARCHAR" />
    <result column="NODE_STRUCT" property="nodeStruct" jdbcType="VARCHAR" />
    <result column="NODE_SCORE" property="nodeScore" jdbcType="INTEGER" />
    <result column="FORMULA" property="formula" jdbcType="VARCHAR" />
    <result column="MAX_SCORE" property="maxScore" jdbcType="INTEGER" />
    <result column="MIN_SCORE" property="minScore" jdbcType="INTEGER" />
    <result column="WEIGHT" property="weight" jdbcType="INTEGER" />
    <result column="REQUIRED_FLAG" property="requiredFlag" jdbcType="VARCHAR" />
    <result column="ERROR_TYPE" property="errorType" jdbcType="VARCHAR" />
    <result column="SCORE_FLAG" property="scoreFlag" jdbcType="VARCHAR" />
    <result column="CRT_TIME" property="crtTime" jdbcType="TIMESTAMP" />
    <result column="MODF_TIME" property="modfTime" jdbcType="TIMESTAMP" />
    <result column="CREATE_STAFF_ID" property="createStaffId" jdbcType="VARCHAR" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="RESERVE_1" property="reserve1" jdbcType="VARCHAR" />
    <result column="RESERVE_2" property="reserve2" jdbcType="VARCHAR" />
    <result column="RESERVE_3" property="reserve3" jdbcType="VARCHAR" />
    <result column="RESERVE_4" property="reserve4" jdbcType="VARCHAR" />
    <result column="RESERVE_5" property="reserve5" jdbcType="VARCHAR" />
    <result column="RESERVE_6" property="reserve6" jdbcType="VARCHAR" />
    <result column="RESERVE_7" property="reserve7" jdbcType="VARCHAR" />
    <result column="RESERVE_8" property="reserve8" jdbcType="VARCHAR" />
    <result column="RESERVE_9" property="reserve9" jdbcType="VARCHAR" />
    <result column="RESERVE_10" property="reserve10" jdbcType="VARCHAR" />
    <result column="NODE_ORDER" property="nodeOrder" jdbcType="INTEGER" />
    <!--联合元素用来处理“一对一”的关系 ,传入nodeId,返回一个checkItem实体.
    使用select指定的方法（传入column指定的这列参数的值）查出对象，并封装给property指定的属性-->
    <association property="checkItem" column="NODE_ID" javaType="com.asiainfo.qm.manage.domain.CheckItem" select="queryCheckItem">
    </association>
  </resultMap>
  <resultMap id="UnionResultMap" type="com.asiainfo.qm.manage.domain.CheckItemDetail" >
    <id column="NODE_ID" property="nodeId" jdbcType="VARCHAR" />
    <id column="NODE_TYPE" property="nodeType" jdbcType="VARCHAR" />
    <id column="TEMPLATE_ID" property="templateId" jdbcType="VARCHAR" />
    <result column="TENANT_ID" property="tenantId" jdbcType="VARCHAR" />
    <result column="PROVINCE_ID" property="provinceId" jdbcType="VARCHAR" />
    <result column="CITY_ID" property="cityId" jdbcType="VARCHAR" />
    <result column="NODE_NAME" property="nodeName" jdbcType="VARCHAR" />
    <result column="P_NODE_ID" property="pNodeId" jdbcType="VARCHAR" />
    <result column="NODE_SCORE" property="nodeScore" jdbcType="INTEGER" />
    <result column="MAX_SCORE" property="maxScore" jdbcType="INTEGER" />
    <result column="MIN_SCORE" property="minScore" jdbcType="INTEGER" />
    <result column="WEIGHT" property="weight" jdbcType="INTEGER" />
    <result column="ERROR_TYPE" property="errorType" jdbcType="VARCHAR" />
    <result column="SCORE_FLAG" property="scoreFlag" jdbcType="VARCHAR" />
    <result column="CRT_TIME" property="crtTime" jdbcType="TIMESTAMP" />
    <result column="MODF_TIME" property="modfTime" jdbcType="TIMESTAMP" />
    <result column="CREATE_STAFF_ID" property="createStaffId" jdbcType="VARCHAR" />
    <result column="NODE_ORDER" property="nodeOrder" jdbcType="INTEGER" />
    <result column="CHECK_ITEM_NAME" property="checkItemName" jdbcType="VARCHAR" />
    <result column="CHECK_ITEM_TYPE" property="checkItemType" jdbcType="VARCHAR" />
    <result column="CHECK_ITEM_VITAL_TYPE" property="checkItemVitalType" jdbcType="VARCHAR" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="SCORE_TYPE" property="scoreType" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    NODE_ID, NODE_TYPE, TEMPLATE_ID, TENANT_ID, PROVINCE_ID, CITY_ID, NODE_NAME, P_NODE_ID, 
    NODE_STRUCT, NODE_SCORE, FORMULA, MAX_SCORE, MIN_SCORE, WEIGHT, REQUIRED_FLAG, ERROR_TYPE, 
    SCORE_FLAG, CRT_TIME, MODF_TIME, CREATE_STAFF_ID, REMARK, RESERVE_1, RESERVE_2, RESERVE_3, 
    RESERVE_4, RESERVE_5, RESERVE_6, RESERVE_7, RESERVE_8, RESERVE_9, RESERVE_10, NODE_ORDER
  </sql>
  <!--考评项联表查询结果-->
  <sql id="UNION_Column_List" >
    t1.NODE_ID, t1.NODE_TYPE, t1.TEMPLATE_ID, t1.TENANT_ID, t1.PROVINCE_ID, t1.CITY_ID, t1.NODE_NAME, t1.P_NODE_ID,
    t1.NODE_SCORE, t1.MAX_SCORE, t1.MIN_SCORE, t1.WEIGHT, t1.ERROR_TYPE,
    t1.SCORE_FLAG, t1.CRT_TIME, t1.MODF_TIME, t1.CREATE_STAFF_ID, t1.NODE_ORDER,
    t2.CHECK_ITEM_NAME, t2.CHECK_ITEM_TYPE, t2.CHECK_ITEM_VITAL_TYPE, t2.REMARK, t3.SCORE_TYPE
  </sql>

  <!--新增查询方法-->
  <select id="queryCheckItem" resultType="com.asiainfo.qm.manage.domain.CheckItem" parameterType="String">
   select CHECK_ITEM_NAME checkItemName, CHECK_ITEM_TYPE checkItemType, CHECK_ITEM_VITAL_TYPE checkItemVitalType, REMARK remark
   from t_qm_check_item where CHECK_ITEM_ID is not null and CHECK_ITEM_ID = #{checkItemId,jdbcType=VARCHAR}
  </select>

  <!--考评项联表查询-->
  <select id="unionSelectByExample" resultMap="UnionResultMap" parameterType="com.asiainfo.qm.manage.domain.CheckItemDetail" >
    select
    <include refid="UNION_Column_List" />
    from t_qm_templatedetail t1
      left outer join t_qm_check_item t2 ON t1.NODE_ID = t2.CHECK_ITEM_ID
      left outer join t_qm_checktemplate t3 ON t1.TEMPLATE_ID = t3.TEMPLATE_ID
    where t1.TENANT_ID = #{tenantId,jdbcType=VARCHAR}
      and t1.TEMPLATE_ID = #{templateId,jdbcType=VARCHAR}
  </select>

  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.asiainfo.qm.manage.domain.TemplateDetailExample" >
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from t_qm_templatedetail
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="com.asiainfo.qm.manage.domain.TemplateDetailKey" >
    select 
    <include refid="Base_Column_List" />
    from t_qm_templatedetail
    where NODE_ID = #{nodeId,jdbcType=VARCHAR}
      and NODE_TYPE = #{nodeType,jdbcType=VARCHAR}
      and TEMPLATE_ID = #{templateId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="com.asiainfo.qm.manage.domain.TemplateDetailKey" >
    delete from t_qm_templatedetail
    where NODE_ID = #{nodeId,jdbcType=VARCHAR}
      and NODE_TYPE = #{nodeType,jdbcType=VARCHAR}
      and TEMPLATE_ID = #{templateId,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="com.asiainfo.qm.manage.domain.TemplateDetailExample" >
    delete from t_qm_templatedetail
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.asiainfo.qm.manage.domain.TemplateDetail" >
    insert into t_qm_templatedetail (NODE_ID, NODE_TYPE, TEMPLATE_ID, 
      TENANT_ID, PROVINCE_ID, CITY_ID, 
      NODE_NAME, P_NODE_ID, NODE_STRUCT, 
      NODE_SCORE, FORMULA, MAX_SCORE, 
      MIN_SCORE, WEIGHT, REQUIRED_FLAG, 
      ERROR_TYPE, SCORE_FLAG, CRT_TIME, 
      MODF_TIME, CREATE_STAFF_ID, REMARK, 
      RESERVE_1, RESERVE_2, RESERVE_3, 
      RESERVE_4, RESERVE_5, RESERVE_6, 
      RESERVE_7, RESERVE_8, RESERVE_9, 
      RESERVE_10, NODE_ORDER)
    values (#{nodeId,jdbcType=VARCHAR}, #{nodeType,jdbcType=VARCHAR}, #{templateId,jdbcType=VARCHAR}, 
      #{tenantId,jdbcType=VARCHAR}, #{provinceId,jdbcType=VARCHAR}, #{cityId,jdbcType=VARCHAR}, 
      #{nodeName,jdbcType=VARCHAR}, #{pNodeId,jdbcType=VARCHAR}, #{nodeStruct,jdbcType=VARCHAR}, 
      #{nodeScore,jdbcType=INTEGER}, #{formula,jdbcType=VARCHAR}, #{maxScore,jdbcType=INTEGER}, 
      #{minScore,jdbcType=INTEGER}, #{weight,jdbcType=INTEGER}, #{requiredFlag,jdbcType=VARCHAR}, 
      #{errorType,jdbcType=VARCHAR}, #{scoreFlag,jdbcType=VARCHAR}, #{crtTime,jdbcType=TIMESTAMP}, 
      #{modfTime,jdbcType=TIMESTAMP}, #{createStaffId,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR}, 
      #{reserve1,jdbcType=VARCHAR}, #{reserve2,jdbcType=VARCHAR}, #{reserve3,jdbcType=VARCHAR}, 
      #{reserve4,jdbcType=VARCHAR}, #{reserve5,jdbcType=VARCHAR}, #{reserve6,jdbcType=VARCHAR}, 
      #{reserve7,jdbcType=VARCHAR}, #{reserve8,jdbcType=VARCHAR}, #{reserve9,jdbcType=VARCHAR}, 
      #{reserve10,jdbcType=VARCHAR}, #{nodeOrder,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.asiainfo.qm.manage.domain.TemplateDetail" >
    insert ignore into t_qm_templatedetail
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="nodeId != null" >
        NODE_ID,
      </if>
      <if test="nodeType != null" >
        NODE_TYPE,
      </if>
      <if test="templateId != null" >
        TEMPLATE_ID,
      </if>
      <if test="tenantId != null" >
        TENANT_ID,
      </if>
      <if test="provinceId != null" >
        PROVINCE_ID,
      </if>
      <if test="cityId != null" >
        CITY_ID,
      </if>
      <if test="nodeName != null" >
        NODE_NAME,
      </if>
      <if test="pNodeId != null" >
        P_NODE_ID,
      </if>
      <if test="nodeStruct != null" >
        NODE_STRUCT,
      </if>
      <if test="nodeScore != null" >
        NODE_SCORE,
      </if>
      <if test="formula != null" >
        FORMULA,
      </if>
      <if test="maxScore != null" >
        MAX_SCORE,
      </if>
      <if test="minScore != null" >
        MIN_SCORE,
      </if>
      <if test="weight != null" >
        WEIGHT,
      </if>
      <if test="requiredFlag != null" >
        REQUIRED_FLAG,
      </if>
      <if test="errorType != null" >
        ERROR_TYPE,
      </if>
      <if test="scoreFlag != null" >
        SCORE_FLAG,
      </if>
      <if test="crtTime != null" >
        CRT_TIME,
      </if>
      <if test="modfTime != null" >
        MODF_TIME,
      </if>
      <if test="createStaffId != null" >
        CREATE_STAFF_ID,
      </if>
      <if test="remark != null" >
        REMARK,
      </if>
      <if test="reserve1 != null" >
        RESERVE_1,
      </if>
      <if test="reserve2 != null" >
        RESERVE_2,
      </if>
      <if test="reserve3 != null" >
        RESERVE_3,
      </if>
      <if test="reserve4 != null" >
        RESERVE_4,
      </if>
      <if test="reserve5 != null" >
        RESERVE_5,
      </if>
      <if test="reserve6 != null" >
        RESERVE_6,
      </if>
      <if test="reserve7 != null" >
        RESERVE_7,
      </if>
      <if test="reserve8 != null" >
        RESERVE_8,
      </if>
      <if test="reserve9 != null" >
        RESERVE_9,
      </if>
      <if test="reserve10 != null" >
        RESERVE_10,
      </if>
      <if test="nodeOrder != null" >
        NODE_ORDER,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="nodeId != null" >
        #{nodeId,jdbcType=VARCHAR},
      </if>
      <if test="nodeType != null" >
        #{nodeType,jdbcType=VARCHAR},
      </if>
      <if test="templateId != null" >
        #{templateId,jdbcType=VARCHAR},
      </if>
      <if test="tenantId != null" >
        #{tenantId,jdbcType=VARCHAR},
      </if>
      <if test="provinceId != null" >
        #{provinceId,jdbcType=VARCHAR},
      </if>
      <if test="cityId != null" >
        #{cityId,jdbcType=VARCHAR},
      </if>
      <if test="nodeName != null" >
        #{nodeName,jdbcType=VARCHAR},
      </if>
      <if test="pNodeId != null" >
        #{pNodeId,jdbcType=VARCHAR},
      </if>
      <if test="nodeStruct != null" >
        #{nodeStruct,jdbcType=VARCHAR},
      </if>
      <if test="nodeScore != null" >
        #{nodeScore,jdbcType=INTEGER},
      </if>
      <if test="formula != null" >
        #{formula,jdbcType=VARCHAR},
      </if>
      <if test="maxScore != null" >
        #{maxScore,jdbcType=INTEGER},
      </if>
      <if test="minScore != null" >
        #{minScore,jdbcType=INTEGER},
      </if>
      <if test="weight != null" >
        #{weight,jdbcType=INTEGER},
      </if>
      <if test="requiredFlag != null" >
        #{requiredFlag,jdbcType=VARCHAR},
      </if>
      <if test="errorType != null" >
        #{errorType,jdbcType=VARCHAR},
      </if>
      <if test="scoreFlag != null" >
        #{scoreFlag,jdbcType=VARCHAR},
      </if>
      <if test="crtTime != null" >
        #{crtTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modfTime != null" >
        #{modfTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createStaffId != null" >
        #{createStaffId,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="reserve1 != null" >
        #{reserve1,jdbcType=VARCHAR},
      </if>
      <if test="reserve2 != null" >
        #{reserve2,jdbcType=VARCHAR},
      </if>
      <if test="reserve3 != null" >
        #{reserve3,jdbcType=VARCHAR},
      </if>
      <if test="reserve4 != null" >
        #{reserve4,jdbcType=VARCHAR},
      </if>
      <if test="reserve5 != null" >
        #{reserve5,jdbcType=VARCHAR},
      </if>
      <if test="reserve6 != null" >
        #{reserve6,jdbcType=VARCHAR},
      </if>
      <if test="reserve7 != null" >
        #{reserve7,jdbcType=VARCHAR},
      </if>
      <if test="reserve8 != null" >
        #{reserve8,jdbcType=VARCHAR},
      </if>
      <if test="reserve9 != null" >
        #{reserve9,jdbcType=VARCHAR},
      </if>
      <if test="reserve10 != null" >
        #{reserve10,jdbcType=VARCHAR},
      </if>
      <if test="nodeOrder != null" >
        #{nodeOrder,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.asiainfo.qm.manage.domain.TemplateDetailExample" resultType="java.lang.Integer" >
    select count(*) from t_qm_templatedetail
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    update t_qm_templatedetail
    <set >
      <if test="record.nodeId != null" >
        NODE_ID = #{record.nodeId,jdbcType=VARCHAR},
      </if>
      <if test="record.nodeType != null" >
        NODE_TYPE = #{record.nodeType,jdbcType=VARCHAR},
      </if>
      <if test="record.templateId != null" >
        TEMPLATE_ID = #{record.templateId,jdbcType=VARCHAR},
      </if>
      <if test="record.tenantId != null" >
        TENANT_ID = #{record.tenantId,jdbcType=VARCHAR},
      </if>
      <if test="record.provinceId != null" >
        PROVINCE_ID = #{record.provinceId,jdbcType=VARCHAR},
      </if>
      <if test="record.cityId != null" >
        CITY_ID = #{record.cityId,jdbcType=VARCHAR},
      </if>
      <if test="record.nodeName != null" >
        NODE_NAME = #{record.nodeName,jdbcType=VARCHAR},
      </if>
      <if test="record.pNodeId != null" >
        P_NODE_ID = #{record.pNodeId,jdbcType=VARCHAR},
      </if>
      <if test="record.nodeStruct != null" >
        NODE_STRUCT = #{record.nodeStruct,jdbcType=VARCHAR},
      </if>
      <if test="record.nodeScore != null" >
        NODE_SCORE = #{record.nodeScore,jdbcType=INTEGER},
      </if>
      <if test="record.formula != null" >
        FORMULA = #{record.formula,jdbcType=VARCHAR},
      </if>
      <if test="record.maxScore != null" >
        MAX_SCORE = #{record.maxScore,jdbcType=INTEGER},
      </if>
      <if test="record.minScore != null" >
        MIN_SCORE = #{record.minScore,jdbcType=INTEGER},
      </if>
      <if test="record.weight != null" >
        WEIGHT = #{record.weight,jdbcType=INTEGER},
      </if>
      <if test="record.requiredFlag != null" >
        REQUIRED_FLAG = #{record.requiredFlag,jdbcType=VARCHAR},
      </if>
      <if test="record.errorType != null" >
        ERROR_TYPE = #{record.errorType,jdbcType=VARCHAR},
      </if>
      <if test="record.scoreFlag != null" >
        SCORE_FLAG = #{record.scoreFlag,jdbcType=VARCHAR},
      </if>
      <if test="record.crtTime != null" >
        CRT_TIME = #{record.crtTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.modfTime != null" >
        MODF_TIME = #{record.modfTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.createStaffId != null" >
        CREATE_STAFF_ID = #{record.createStaffId,jdbcType=VARCHAR},
      </if>
      <if test="record.remark != null" >
        REMARK = #{record.remark,jdbcType=VARCHAR},
      </if>
      <if test="record.reserve1 != null" >
        RESERVE_1 = #{record.reserve1,jdbcType=VARCHAR},
      </if>
      <if test="record.reserve2 != null" >
        RESERVE_2 = #{record.reserve2,jdbcType=VARCHAR},
      </if>
      <if test="record.reserve3 != null" >
        RESERVE_3 = #{record.reserve3,jdbcType=VARCHAR},
      </if>
      <if test="record.reserve4 != null" >
        RESERVE_4 = #{record.reserve4,jdbcType=VARCHAR},
      </if>
      <if test="record.reserve5 != null" >
        RESERVE_5 = #{record.reserve5,jdbcType=VARCHAR},
      </if>
      <if test="record.reserve6 != null" >
        RESERVE_6 = #{record.reserve6,jdbcType=VARCHAR},
      </if>
      <if test="record.reserve7 != null" >
        RESERVE_7 = #{record.reserve7,jdbcType=VARCHAR},
      </if>
      <if test="record.reserve8 != null" >
        RESERVE_8 = #{record.reserve8,jdbcType=VARCHAR},
      </if>
      <if test="record.reserve9 != null" >
        RESERVE_9 = #{record.reserve9,jdbcType=VARCHAR},
      </if>
      <if test="record.reserve10 != null" >
        RESERVE_10 = #{record.reserve10,jdbcType=VARCHAR},
      </if>
      <if test="record.nodeOrder != null" >
        NODE_ORDER = #{record.nodeOrder,jdbcType=INTEGER},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    update t_qm_templatedetail
    set NODE_ID = #{record.nodeId,jdbcType=VARCHAR},
      NODE_TYPE = #{record.nodeType,jdbcType=VARCHAR},
      TEMPLATE_ID = #{record.templateId,jdbcType=VARCHAR},
      TENANT_ID = #{record.tenantId,jdbcType=VARCHAR},
      PROVINCE_ID = #{record.provinceId,jdbcType=VARCHAR},
      CITY_ID = #{record.cityId,jdbcType=VARCHAR},
      NODE_NAME = #{record.nodeName,jdbcType=VARCHAR},
      P_NODE_ID = #{record.pNodeId,jdbcType=VARCHAR},
      NODE_STRUCT = #{record.nodeStruct,jdbcType=VARCHAR},
      NODE_SCORE = #{record.nodeScore,jdbcType=INTEGER},
      FORMULA = #{record.formula,jdbcType=VARCHAR},
      MAX_SCORE = #{record.maxScore,jdbcType=INTEGER},
      MIN_SCORE = #{record.minScore,jdbcType=INTEGER},
      WEIGHT = #{record.weight,jdbcType=INTEGER},
      REQUIRED_FLAG = #{record.requiredFlag,jdbcType=VARCHAR},
      ERROR_TYPE = #{record.errorType,jdbcType=VARCHAR},
      SCORE_FLAG = #{record.scoreFlag,jdbcType=VARCHAR},
      CRT_TIME = #{record.crtTime,jdbcType=TIMESTAMP},
      MODF_TIME = #{record.modfTime,jdbcType=TIMESTAMP},
      CREATE_STAFF_ID = #{record.createStaffId,jdbcType=VARCHAR},
      REMARK = #{record.remark,jdbcType=VARCHAR},
      RESERVE_1 = #{record.reserve1,jdbcType=VARCHAR},
      RESERVE_2 = #{record.reserve2,jdbcType=VARCHAR},
      RESERVE_3 = #{record.reserve3,jdbcType=VARCHAR},
      RESERVE_4 = #{record.reserve4,jdbcType=VARCHAR},
      RESERVE_5 = #{record.reserve5,jdbcType=VARCHAR},
      RESERVE_6 = #{record.reserve6,jdbcType=VARCHAR},
      RESERVE_7 = #{record.reserve7,jdbcType=VARCHAR},
      RESERVE_8 = #{record.reserve8,jdbcType=VARCHAR},
      RESERVE_9 = #{record.reserve9,jdbcType=VARCHAR},
      RESERVE_10 = #{record.reserve10,jdbcType=VARCHAR},
      NODE_ORDER = #{record.nodeOrder,jdbcType=INTEGER}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.asiainfo.qm.manage.domain.TemplateDetail" >
    update t_qm_templatedetail
    <set >
      <if test="tenantId != null" >
        TENANT_ID = #{tenantId,jdbcType=VARCHAR},
      </if>
      <if test="provinceId != null" >
        PROVINCE_ID = #{provinceId,jdbcType=VARCHAR},
      </if>
      <if test="cityId != null" >
        CITY_ID = #{cityId,jdbcType=VARCHAR},
      </if>
      <if test="nodeName != null" >
        NODE_NAME = #{nodeName,jdbcType=VARCHAR},
      </if>
      <if test="pNodeId != null" >
        P_NODE_ID = #{pNodeId,jdbcType=VARCHAR},
      </if>
      <if test="nodeStruct != null" >
        NODE_STRUCT = #{nodeStruct,jdbcType=VARCHAR},
      </if>
      <if test="nodeScore != null" >
        NODE_SCORE = #{nodeScore,jdbcType=INTEGER},
      </if>
      <if test="formula != null" >
        FORMULA = #{formula,jdbcType=VARCHAR},
      </if>
      <if test="maxScore != null" >
        MAX_SCORE = #{maxScore,jdbcType=INTEGER},
      </if>
      <if test="minScore != null" >
        MIN_SCORE = #{minScore,jdbcType=INTEGER},
      </if>
      <if test="weight != null" >
        WEIGHT = #{weight,jdbcType=INTEGER},
      </if>
      <if test="requiredFlag != null" >
        REQUIRED_FLAG = #{requiredFlag,jdbcType=VARCHAR},
      </if>
      <if test="errorType != null" >
        ERROR_TYPE = #{errorType,jdbcType=VARCHAR},
      </if>
      <if test="scoreFlag != null" >
        SCORE_FLAG = #{scoreFlag,jdbcType=VARCHAR},
      </if>
      <if test="crtTime != null" >
        CRT_TIME = #{crtTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modfTime != null" >
        MODF_TIME = #{modfTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createStaffId != null" >
        CREATE_STAFF_ID = #{createStaffId,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        REMARK = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="reserve1 != null" >
        RESERVE_1 = #{reserve1,jdbcType=VARCHAR},
      </if>
      <if test="reserve2 != null" >
        RESERVE_2 = #{reserve2,jdbcType=VARCHAR},
      </if>
      <if test="reserve3 != null" >
        RESERVE_3 = #{reserve3,jdbcType=VARCHAR},
      </if>
      <if test="reserve4 != null" >
        RESERVE_4 = #{reserve4,jdbcType=VARCHAR},
      </if>
      <if test="reserve5 != null" >
        RESERVE_5 = #{reserve5,jdbcType=VARCHAR},
      </if>
      <if test="reserve6 != null" >
        RESERVE_6 = #{reserve6,jdbcType=VARCHAR},
      </if>
      <if test="reserve7 != null" >
        RESERVE_7 = #{reserve7,jdbcType=VARCHAR},
      </if>
      <if test="reserve8 != null" >
        RESERVE_8 = #{reserve8,jdbcType=VARCHAR},
      </if>
      <if test="reserve9 != null" >
        RESERVE_9 = #{reserve9,jdbcType=VARCHAR},
      </if>
      <if test="reserve10 != null" >
        RESERVE_10 = #{reserve10,jdbcType=VARCHAR},
      </if>
      <if test="nodeOrder != null" >
        NODE_ORDER = #{nodeOrder,jdbcType=INTEGER},
      </if>
    </set>
    where NODE_ID = #{nodeId,jdbcType=VARCHAR}
      and NODE_TYPE = #{nodeType,jdbcType=VARCHAR}
      and TEMPLATE_ID = #{templateId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.asiainfo.qm.manage.domain.TemplateDetail" >
    update t_qm_templatedetail
    set TENANT_ID = #{tenantId,jdbcType=VARCHAR},
      PROVINCE_ID = #{provinceId,jdbcType=VARCHAR},
      CITY_ID = #{cityId,jdbcType=VARCHAR},
      NODE_NAME = #{nodeName,jdbcType=VARCHAR},
      P_NODE_ID = #{pNodeId,jdbcType=VARCHAR},
      NODE_STRUCT = #{nodeStruct,jdbcType=VARCHAR},
      NODE_SCORE = #{nodeScore,jdbcType=INTEGER},
      FORMULA = #{formula,jdbcType=VARCHAR},
      MAX_SCORE = #{maxScore,jdbcType=INTEGER},
      MIN_SCORE = #{minScore,jdbcType=INTEGER},
      WEIGHT = #{weight,jdbcType=INTEGER},
      REQUIRED_FLAG = #{requiredFlag,jdbcType=VARCHAR},
      ERROR_TYPE = #{errorType,jdbcType=VARCHAR},
      SCORE_FLAG = #{scoreFlag,jdbcType=VARCHAR},
      CRT_TIME = #{crtTime,jdbcType=TIMESTAMP},
      MODF_TIME = #{modfTime,jdbcType=TIMESTAMP},
      CREATE_STAFF_ID = #{createStaffId,jdbcType=VARCHAR},
      REMARK = #{remark,jdbcType=VARCHAR},
      RESERVE_1 = #{reserve1,jdbcType=VARCHAR},
      RESERVE_2 = #{reserve2,jdbcType=VARCHAR},
      RESERVE_3 = #{reserve3,jdbcType=VARCHAR},
      RESERVE_4 = #{reserve4,jdbcType=VARCHAR},
      RESERVE_5 = #{reserve5,jdbcType=VARCHAR},
      RESERVE_6 = #{reserve6,jdbcType=VARCHAR},
      RESERVE_7 = #{reserve7,jdbcType=VARCHAR},
      RESERVE_8 = #{reserve8,jdbcType=VARCHAR},
      RESERVE_9 = #{reserve9,jdbcType=VARCHAR},
      RESERVE_10 = #{reserve10,jdbcType=VARCHAR},
      NODE_ORDER = #{nodeOrder,jdbcType=INTEGER}
    where NODE_ID = #{nodeId,jdbcType=VARCHAR}
      and NODE_TYPE = #{nodeType,jdbcType=VARCHAR}
      and TEMPLATE_ID = #{templateId,jdbcType=VARCHAR}
  </update>

  <!--新增的批量更新方法-->
  <!--<update id="update" parameterType="java.util.List" >-->
    <!--update t_qm_templatedetail-->
    <!--set  MAX_SCORE =-->
    <!--<foreach collection="list" item="item" index="index"-->
             <!--separator=" " open="case TEMPLATE_ID" close="end">-->
      <!--when #{item.templateId} then  #{item.maxScore,jdbcType=VARCHAR}-->
    <!--</foreach>-->
    <!--,NODE_SCORE =-->
    <!--<foreach collection="list" item="item" index="index"-->
             <!--separator=" " open="case TEMPLATE_ID" close="end">-->
      <!--when #{item.templateId} then  #{item.nodeScore,jdbcType=VARCHAR}-->
    <!--</foreach>-->
    <!--,MODF_TIME =-->
    <!--<foreach collection="list" item="item" index="index"-->
             <!--separator=" " open="case TEMPLATE_ID" close="end">-->
      <!--when #{item.templateId} then  now()-->
    <!--</foreach>-->
    <!--where TEMPLATE_ID in-->
    <!--<foreach collection="list" index="index" item="item" separator="," open="(" close=")">-->
      <!--#{item.templateId,jdbcType=VARCHAR}-->
    <!--</foreach>-->
  <!--</update>-->
  <!--新增的批量更新方法-->
  <update id="update" parameterType="java.util.Map" >
    update t_qm_templatedetail
    set MAX_SCORE = #{maxScore,jdbcType=VARCHAR},
    NODE_SCORE = #{nodeScore,jdbcType=VARCHAR},
    MODF_TIME = now()
    where TEMPLATE_ID = #{templateId,jdbcType=VARCHAR} and NODE_ID = #{nodeId,jdbcType=VARCHAR}
  </update>
</mapper>